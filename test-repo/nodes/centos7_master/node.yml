node_map:
  bootstrap:
    hosts:
      - 192.168.122.131
      - 192.168.122.132
    fabruns:
      - openstack/bootstrap

  openstack:
    hosts:
      - 192.168.122.131
    fabruns:
      - openstack/keystone
      - openstack/glance
      - openstack/neutron:
          enable_services: ['server']
      - openstack/nova:
          enable_services: ['api', 'conductor', 'scheduler', 'placement', 'consoleauth', 'novncproxy']
      - openstack/cinder
      - openstack/horizon
      - openstack/heat
      - openstack/test

  openstack_compute:
    hosts:
      - 192.168.122.132
    fabruns:
      - openstack/compute:
          enable_services: ['compute', 'linuxbridge-agent']

  openstack_network:
    hosts:
      - 192.168.122.132
    fabruns:
      - openstack/neutron_network:
          enable_services: ['dhcp-agent', 'metadata-agent', 'linuxbridge-agent', 'neutron-lbaasv2-agent']

  mysql:
    hosts:
      - 192.168.122.131
      - 192.168.122.132
    fabruns:
      - openstack/mysql

  memcached:
    hosts:
      - 192.168.122.131
      - 192.168.122.132
    fabruns:
      - openstack/memcached

  rabbitmq:
    hosts:
      - 192.168.122.131
      - 192.168.122.132
    fabruns:
      - openstack/rabbitmq

  haproxy:
    hosts:
      - 192.168.122.131
      - 192.168.122.132
    fabruns:
      - openstack/haproxy
